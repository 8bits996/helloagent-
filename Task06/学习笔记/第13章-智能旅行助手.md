# ç¬¬13ç«  å­¦ä¹ ç¬”è®° - æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹

**å­¦ä¹ æ—¥æœŸ**: 2025-12-25  
**ç« èŠ‚**: ç¬¬åä¸‰ç«  - MCP ä¸å¤šæ™ºèƒ½ä½“åä½œçš„çœŸå®ä¸–ç•Œåº”ç”¨  
**çŠ¶æ€**: ğŸ“– å­¦ä¹ ä¸­

---

## ğŸ¯ æœ¬ç« å­¦ä¹ ç›®æ ‡

### æ ¸å¿ƒç›®æ ‡
1. âœ… æŒæ¡å¤šæ™ºèƒ½ä½“åä½œåœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨
2. âœ… ç†è§£æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹çš„ç³»ç»Ÿæ¶æ„è®¾è®¡
3. âœ… å­¦ä¹ MCPå·¥å…·çš„å…±äº«å’Œç®¡ç†
4. âœ… å®ç°å‰åç«¯åˆ†ç¦»çš„Agentåº”ç”¨

### èƒ½åŠ›æå‡
- ä»ç†è®ºåˆ°å®è·µçš„å®Œæ•´é¡¹ç›®å¼€å‘
- å¤šAgentåä½œçš„è®¾è®¡æ¨¡å¼
- MCP Serverçš„å®é™…åº”ç”¨
- å‰åç«¯äº¤äº’è®¾è®¡

---

## ğŸ“š ç« èŠ‚å†…å®¹æ¦‚è§ˆ

### 13.1 é¡¹ç›®æ¦‚è¿°

**æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹**æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿ,ç›¸æ¯”ç¬¬ä¸€ç« çš„ç®€å•æ—…è¡ŒåŠ©æ‰‹,åŠŸèƒ½æ›´åŠ å…¨é¢ã€‚

**æ ¸å¿ƒåŠŸèƒ½**:
1. **è¡Œç¨‹æ™ºèƒ½è§„åˆ’**: åŸºäºç”¨æˆ·éœ€æ±‚è‡ªåŠ¨ç”Ÿæˆæ—…è¡Œè®¡åˆ’
2. **åœ°å›¾å¯è§†åŒ–**: ç›´è§‚å±•ç¤ºæ—…è¡Œè·¯çº¿å’Œæ™¯ç‚¹ä½ç½®
3. **é¢„ç®—è®¡ç®—**: æ™ºèƒ½é¢„ç®—åˆ†æå’Œå»ºè®®
4. **è¡Œç¨‹ç¼–è¾‘**: å¯ç¼–è¾‘å’Œè°ƒæ•´ç”Ÿæˆçš„è¡Œç¨‹
5. **å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒå¤šç§æ ¼å¼å¯¼å‡º

**æŠ€æœ¯ç‰¹ç‚¹**:
- å‰åç«¯åˆ†ç¦»æ¶æ„
- å¤šæ™ºèƒ½ä½“åä½œ
- MCPå·¥å…·å…±äº«
- å®æ—¶APIé›†æˆ

---

### 13.2 æ•°æ®æ¨¡å‹è®¾è®¡

**ä½¿ç”¨Pydanticä»ä¸‹è‡³ä¸Šè®¾è®¡æ•°æ®æ¨¡å‹**

#### è®¾è®¡åŸåˆ™
- **ç±»å‹å®‰å…¨**: åˆ©ç”¨Pydanticçš„ç±»å‹æ£€æŸ¥
- **æ•°æ®éªŒè¯**: è‡ªåŠ¨éªŒè¯æ•°æ®æ ¼å¼
- **ç»Ÿä¸€æ¥å£**: å‰åç«¯æ•°æ®æ ¼å¼ä¸€è‡´
- **æ–‡æ¡£ç”Ÿæˆ**: è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£

#### æ ¸å¿ƒæ•°æ®æ¨¡å‹

**1. ç”¨æˆ·éœ€æ±‚æ¨¡å‹**
```python
from pydantic import BaseModel, Field
from typing import List, Optional
from datetime import date

class TravelRequest(BaseModel):
    """ç”¨æˆ·æ—…è¡Œéœ€æ±‚"""
    destination: str = Field(..., description="ç›®çš„åœ°åŸå¸‚")
    start_date: date = Field(..., description="å‡ºå‘æ—¥æœŸ")
    end_date: date = Field(..., description="è¿”å›æ—¥æœŸ")
    budget: float = Field(..., gt=0, description="æ€»é¢„ç®—(å…ƒ)")
    preferences: List[str] = Field(
        default_factory=list,
        description="åå¥½æ ‡ç­¾,å¦‚'ç¾é£Ÿ'ã€'å†å²'ã€'è‡ªç„¶'"
    )
    travelers: int = Field(default=1, gt=0, description="æ—…è¡Œäººæ•°")
```

**2. æ™¯ç‚¹æ¨¡å‹**
```python
class Attraction(BaseModel):
    """æ™¯ç‚¹ä¿¡æ¯"""
    name: str = Field(..., description="æ™¯ç‚¹åç§°")
    location: dict = Field(..., description="ç»çº¬åº¦åæ ‡")
    description: str = Field(..., description="æ™¯ç‚¹æè¿°")
    rating: float = Field(..., ge=0, le=5, description="è¯„åˆ†(0-5)")
    estimated_duration: int = Field(..., description="å»ºè®®æ¸¸ç©æ—¶é•¿(åˆ†é’Ÿ)")
    ticket_price: float = Field(default=0, description="é—¨ç¥¨ä»·æ ¼")
    images: List[str] = Field(default_factory=list, description="æ™¯ç‚¹å›¾ç‰‡URL")
    tags: List[str] = Field(default_factory=list, description="æ™¯ç‚¹æ ‡ç­¾")
```

**3. å¤©æ°”æ¨¡å‹**
```python
class WeatherInfo(BaseModel):
    """å¤©æ°”ä¿¡æ¯"""
    date: date = Field(..., description="æ—¥æœŸ")
    temperature_range: tuple[int, int] = Field(..., description="æ¸©åº¦èŒƒå›´(Â°C)")
    weather: str = Field(..., description="å¤©æ°”çŠ¶å†µ")
    wind: str = Field(..., description="é£åŠ›")
    suggestion: str = Field(..., description="å‡ºè¡Œå»ºè®®")
```

**4. é…’åº—æ¨¡å‹**
```python
class Hotel(BaseModel):
    """é…’åº—ä¿¡æ¯"""
    name: str = Field(..., description="é…’åº—åç§°")
    location: dict = Field(..., description="ä½ç½®åæ ‡")
    rating: float = Field(..., ge=0, le=5, description="è¯„åˆ†")
    price_per_night: float = Field(..., gt=0, description="æ¯æ™šä»·æ ¼")
    amenities: List[str] = Field(default_factory=list, description="è®¾æ–½")
    images: List[str] = Field(default_factory=list, description="é…’åº—å›¾ç‰‡")
```

**5. æ¯æ—¥è¡Œç¨‹æ¨¡å‹**
```python
class DailyItinerary(BaseModel):
    """æ¯æ—¥è¡Œç¨‹"""
    date: date = Field(..., description="æ—¥æœŸ")
    weather: WeatherInfo = Field(..., description="å½“æ—¥å¤©æ°”")
    attractions: List[Attraction] = Field(..., description="æ¸¸è§ˆæ™¯ç‚¹")
    meals: List[dict] = Field(default_factory=list, description="é¤é¥®å®‰æ’")
    transportation: dict = Field(..., description="äº¤é€šæ–¹å¼")
    estimated_cost: float = Field(..., description="é¢„è®¡èŠ±è´¹")
    notes: str = Field(default="", description="å¤‡æ³¨")
```

**6. å®Œæ•´è¡Œç¨‹æ¨¡å‹**
```python
class TripPlan(BaseModel):
    """å®Œæ•´æ—…è¡Œè®¡åˆ’"""
    request: TravelRequest = Field(..., description="åŸå§‹éœ€æ±‚")
    hotel: Hotel = Field(..., description="æ¨èé…’åº—")
    itinerary: List[DailyItinerary] = Field(..., description="æ¯æ—¥è¡Œç¨‹")
    total_cost: float = Field(..., description="æ€»è´¹ç”¨")
    budget_analysis: dict = Field(..., description="é¢„ç®—åˆ†æ")
    tips: List[str] = Field(default_factory=list, description="æ—…è¡Œå»ºè®®")
```

**æ•°æ®æµ**:
```
ç”¨æˆ·è¾“å…¥(TravelRequest) 
    â†“
å¤šAgentå¤„ç†
    â†“
ç»“æ„åŒ–è¾“å‡º(TripPlan)
    â†“
å‰ç«¯å±•ç¤º
```

---

### 13.3 å¤šæ™ºèƒ½ä½“åä½œè®¾è®¡

**4ä¸ªä¸“é—¨çš„AgentååŒå·¥ä½œ**

#### Agentæ¶æ„
```
TripPlannerOrchestrator (åè°ƒå™¨)
    â”œâ”€â”€ AttractionSearchAgent (æ™¯ç‚¹æœç´¢)
    â”œâ”€â”€ WeatherQueryAgent (å¤©æ°”æŸ¥è¯¢)
    â”œâ”€â”€ HotelRecommendAgent (é…’åº—æ¨è)
    â””â”€â”€ ItineraryPlannerAgent (è¡Œç¨‹è§„åˆ’)
```

#### 1. AttractionSearchAgent - æ™¯ç‚¹æœç´¢Agent

**èŒè´£**: æ ¹æ®ç”¨æˆ·åå¥½æœç´¢å’Œç­›é€‰æ™¯ç‚¹

**å·¥å…·ä½¿ç”¨**:
- é«˜å¾·åœ°å›¾API (æœç´¢POI)
- Unsplash API (è·å–æ™¯ç‚¹å›¾ç‰‡)

**å®ç°è¦ç‚¹**:
```python
class AttractionSearchAgent(BaseAgent):
    """æ™¯ç‚¹æœç´¢Agent"""
    
    def __init__(self, llm, tools):
        super().__init__(
            name="AttractionSearchAgent",
            role="æ™¯ç‚¹æœç´¢ä¸“å®¶",
            goal="æ ¹æ®ç”¨æˆ·åå¥½æ‰¾åˆ°æœ€åˆé€‚çš„æ™¯ç‚¹",
            llm=llm,
            tools=tools
        )
    
    async def search(self, destination, preferences, budget):
        """æœç´¢æ™¯ç‚¹"""
        # 1. è°ƒç”¨é«˜å¾·åœ°å›¾æœç´¢API
        pois = await self.tools["amap_search"](
            city=destination,
            keywords=preferences
        )
        
        # 2. ä½¿ç”¨LLMç­›é€‰å’Œæ’åº
        prompt = f"""
        æ ¹æ®ä»¥ä¸‹æ™¯ç‚¹ä¿¡æ¯å’Œç”¨æˆ·åå¥½,æ¨èæœ€åˆé€‚çš„5-10ä¸ªæ™¯ç‚¹:
        
        æ™¯ç‚¹åˆ—è¡¨: {pois}
        ç”¨æˆ·åå¥½: {preferences}
        é¢„ç®—è€ƒè™‘: {budget}
        
        è¯·è¿”å›JSONæ ¼å¼,åŒ…å«æ™¯ç‚¹åç§°ã€ç†ç”±ã€é¢„è®¡èŠ±è´¹ç­‰ã€‚
        """
        
        result = await self.llm.generate(prompt)
        
        # 3. ä¸ºæ¯ä¸ªæ™¯ç‚¹è·å–å›¾ç‰‡
        for attraction in result:
            images = await self.tools["unsplash_search"](
                query=attraction["name"]
            )
            attraction["images"] = images
        
        return result
```

**å…³é”®ç‚¹**:
- APIè°ƒç”¨ä¸LLMæ¨ç†ç»“åˆ
- å¤šç»´åº¦ç­›é€‰(è¯„åˆ†ã€è·ç¦»ã€ä»·æ ¼)
- å›¾ç‰‡è·å–å¢å¼ºå±•ç¤ºæ•ˆæœ

#### 2. WeatherQueryAgent - å¤©æ°”æŸ¥è¯¢Agent

**èŒè´£**: æŸ¥è¯¢æ—…è¡ŒæœŸé—´çš„å¤©æ°”æƒ…å†µ

**å·¥å…·ä½¿ç”¨**:
- é«˜å¾·åœ°å›¾å¤©æ°”API

**å®ç°è¦ç‚¹**:
```python
class WeatherQueryAgent(BaseAgent):
    """å¤©æ°”æŸ¥è¯¢Agent"""
    
    async def query_weather(self, city, date_range):
        """æŸ¥è¯¢æŒ‡å®šæ—¥æœŸèŒƒå›´çš„å¤©æ°”"""
        weather_data = []
        
        for date in date_range:
            # è°ƒç”¨å¤©æ°”API
            weather = await self.tools["amap_weather"](
                city=city,
                date=date
            )
            
            # LLMç”Ÿæˆå‡ºè¡Œå»ºè®®
            suggestion = await self.llm.generate(f"""
            æ ¹æ®ä»¥ä¸‹å¤©æ°”æƒ…å†µ,ç»™å‡ºå‡ºè¡Œå»ºè®®:
            æ—¥æœŸ: {date}
            å¤©æ°”: {weather}
            
            å»ºè®®åº”åŒ…æ‹¬:ç©¿è¡£å»ºè®®ã€æ˜¯å¦é€‚åˆæˆ·å¤–æ´»åŠ¨ã€æ³¨æ„äº‹é¡¹ç­‰ã€‚
            """)
            
            weather_data.append({
                "date": date,
                "weather": weather,
                "suggestion": suggestion
            })
        
        return weather_data
```

#### 3. HotelRecommendAgent - é…’åº—æ¨èAgent

**èŒè´£**: æ ¹æ®é¢„ç®—å’Œä½ç½®æ¨èé…’åº—

**å·¥å…·ä½¿ç”¨**:
- é«˜å¾·åœ°å›¾POIæœç´¢

**å®ç°è¦ç‚¹**:
```python
class HotelRecommendAgent(BaseAgent):
    """é…’åº—æ¨èAgent"""
    
    async def recommend_hotel(self, city, center_point, budget, nights):
        """æ¨èé…’åº—"""
        # è®¡ç®—æ¯æ™šé¢„ç®—
        per_night_budget = budget * 0.3 / nights  # 30%é¢„ç®—ç”¨äºä½å®¿
        
        # æœç´¢é…’åº—
        hotels = await self.tools["amap_search"](
            city=city,
            type="é…’åº—",
            location=center_point,
            radius=3000  # 3kmèŒƒå›´å†…
        )
        
        # LLMåˆ†ææ¨è
        prompt = f"""
        ä»ä»¥ä¸‹é…’åº—ä¸­æ¨èæœ€åˆé€‚çš„ä¸€ä¸ª:
        
        é…’åº—åˆ—è¡¨: {hotels}
        æ¯æ™šé¢„ç®—: {per_night_budget}å…ƒ
        ä¸­å¿ƒä½ç½®: {center_point} (æ–¹ä¾¿åˆ°è¾¾ä¸»è¦æ™¯ç‚¹)
        
        è€ƒè™‘å› ç´ :
        1. ä»·æ ¼åœ¨é¢„ç®—èŒƒå›´å†…
        2. ä½ç½®ä¾¿åˆ©(è·ç¦»æ™¯ç‚¹è¿‘)
        3. è¯„åˆ†é«˜
        4. è®¾æ–½å®Œå–„
        
        è¿”å›æ¨èç†ç”±ã€‚
        """
        
        recommendation = await self.llm.generate(prompt)
        return recommendation
```

#### 4. ItineraryPlannerAgent - è¡Œç¨‹è§„åˆ’Agent

**èŒè´£**: ç»¼åˆæ‰€æœ‰ä¿¡æ¯ç”Ÿæˆå®Œæ•´è¡Œç¨‹

**ä¾èµ–**: å…¶ä»–ä¸‰ä¸ªAgentçš„è¾“å‡º

**å®ç°è¦ç‚¹**:
```python
class ItineraryPlannerAgent(BaseAgent):
    """è¡Œç¨‹è§„åˆ’Agent"""
    
    async def create_itinerary(
        self,
        attractions,
        weather_info,
        hotel,
        days,
        budget
    ):
        """ç”Ÿæˆè¡Œç¨‹è®¡åˆ’"""
        # 1. è®¡ç®—æ¯æ—¥é¢„ç®—
        daily_budget = (budget - hotel.price * days) / days
        
        # 2. æ™¯ç‚¹æŒ‰æ—¥æœŸåˆ†ç»„
        # è€ƒè™‘å› ç´ :å¤©æ°”ã€è·ç¦»ã€æ—¶é—´ã€é¢„ç®—
        
        # 3. ä½¿ç”¨LLMä¼˜åŒ–è¡Œç¨‹
        prompt = f"""
        è¯·ä¸º{days}å¤©çš„æ—…è¡Œç”Ÿæˆè¯¦ç»†è¡Œç¨‹:
        
        å¯é€‰æ™¯ç‚¹: {attractions}
        å¤©æ°”æƒ…å†µ: {weather_info}
        ä½å®¿é…’åº—: {hotel}
        æ¯æ—¥é¢„ç®—: {daily_budget}å…ƒ
        
        è¦æ±‚:
        1. æ¯å¤©å®‰æ’3-4ä¸ªæ™¯ç‚¹
        2. è€ƒè™‘å¤©æ°”å› ç´ (é›¨å¤©å®‰æ’å®¤å†…æ™¯ç‚¹)
        3. ä¼˜åŒ–è·¯çº¿,å‡å°‘å¾€è¿”
        4. æ§åˆ¶é¢„ç®—
        5. åŠ³é€¸ç»“åˆ,é¿å…è¿‡åº¦ç–²åŠ³
        
        è¿”å›æ¯æ—¥è¯¦ç»†è®¡åˆ’,åŒ…æ‹¬:
        - æ™¯ç‚¹é¡ºåº
        - äº¤é€šæ–¹å¼
        - ç”¨é¤å®‰æ’
        - é¢„è®¡èŠ±è´¹
        - æ³¨æ„äº‹é¡¹
        """
        
        itinerary = await self.llm.generate(prompt)
        return itinerary
```

#### åè°ƒå™¨ - TripPlannerOrchestrator

**èŒè´£**: åè°ƒæ‰€æœ‰Agent,æ§åˆ¶æ‰§è¡Œæµç¨‹

**æ‰§è¡Œæµç¨‹**:
```python
class TripPlannerOrchestrator:
    """æ—…è¡Œè§„åˆ’åè°ƒå™¨"""
    
    def __init__(self, llm, mcp_clients):
        self.attraction_agent = AttractionSearchAgent(llm, mcp_clients)
        self.weather_agent = WeatherQueryAgent(llm, mcp_clients)
        self.hotel_agent = HotelRecommendAgent(llm, mcp_clients)
        self.itinerary_agent = ItineraryPlannerAgent(llm, mcp_clients)
    
    async def plan_trip(self, request: TravelRequest) -> TripPlan:
        """è§„åˆ’æ—…è¡Œ"""
        # 1. å¹¶è¡Œæ‰§è¡Œç‹¬ç«‹ä»»åŠ¡
        attractions_task = self.attraction_agent.search(
            request.destination,
            request.preferences,
            request.budget
        )
        
        weather_task = self.weather_agent.query_weather(
            request.destination,
            date_range(request.start_date, request.end_date)
        )
        
        # ç­‰å¾…å¹¶è¡Œä»»åŠ¡å®Œæˆ
        attractions, weather_info = await asyncio.gather(
            attractions_task,
            weather_task
        )
        
        # 2. è®¡ç®—ä¸­å¿ƒç‚¹(åŸºäºæ™¯ç‚¹ä½ç½®)
        center_point = calculate_center(attractions)
        
        # 3. æ¨èé…’åº—(ä¾èµ–æ™¯ç‚¹ä¿¡æ¯)
        hotel = await self.hotel_agent.recommend_hotel(
            request.destination,
            center_point,
            request.budget,
            (request.end_date - request.start_date).days
        )
        
        # 4. ç”Ÿæˆè¡Œç¨‹(ä¾èµ–æ‰€æœ‰ä¿¡æ¯)
        itinerary = await self.itinerary_agent.create_itinerary(
            attractions,
            weather_info,
            hotel,
            (request.end_date - request.start_date).days,
            request.budget
        )
        
        # 5. è®¡ç®—æ€»è´¹ç”¨å’Œé¢„ç®—åˆ†æ
        total_cost = self._calculate_total_cost(itinerary, hotel)
        budget_analysis = self._analyze_budget(
            total_cost,
            request.budget
        )
        
        # 6. è¿”å›å®Œæ•´è®¡åˆ’
        return TripPlan(
            request=request,
            hotel=hotel,
            itinerary=itinerary,
            total_cost=total_cost,
            budget_analysis=budget_analysis
        )
```

**åä½œæ¨¡å¼**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         TripPlannerOrchestrator             â”‚
â”‚              (åè°ƒå™¨)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚           â”‚           â”‚
    â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Attractionâ”‚â”‚Weatherâ”‚â”‚ Hotel  â”‚ (å¹¶è¡Œ)
â”‚ Agent  â”‚â”‚ Agent â”‚â”‚ Agent  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚         â”‚          â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Itinerary   â”‚ (ä¸²è¡Œ,ä¾èµ–å‰é¢ç»“æœ)
        â”‚   Agent     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 13.4 MCPå·¥å…·é›†æˆ

**å…±äº«MCP Server - èŠ‚çœèµ„æº,ç»Ÿä¸€ç®¡ç†**

#### ä¸ºä»€ä¹ˆéœ€è¦å…±äº«MCP?

**é—®é¢˜åœºæ™¯**:
- å¤šä¸ªAgentéƒ½éœ€è¦ä½¿ç”¨é«˜å¾·åœ°å›¾API
- æ¯ä¸ªAgentç‹¬ç«‹è¿æ¥ â†’ èµ„æºæµªè´¹
- APIè°ƒç”¨é¢‘ç‡éš¾ä»¥æ§åˆ¶
- é…ç½®ç®¡ç†åˆ†æ•£

**è§£å†³æ–¹æ¡ˆ**: å…±äº«MCP Client

```python
class SharedMCPManager:
    """å…±äº«MCPç®¡ç†å™¨"""
    
    def __init__(self):
        self._clients = {}
        self._locks = {}
    
    async def get_client(self, server_name):
        """è·å–æˆ–åˆ›å»ºMCPå®¢æˆ·ç«¯"""
        if server_name not in self._clients:
            # åˆ›å»ºæ–°è¿æ¥
            self._clients[server_name] = await self._create_client(
                server_name
            )
            self._locks[server_name] = asyncio.Lock()
        
        return self._clients[server_name]
    
    async def call_tool(self, server_name, tool_name, arguments):
        """è°ƒç”¨å·¥å…·(å¸¦é”æ§åˆ¶)"""
        async with self._locks[server_name]:
            client = await self.get_client(server_name)
            return await client.call_tool(tool_name, arguments)
    
    async def close_all(self):
        """å…³é—­æ‰€æœ‰è¿æ¥"""
        for client in self._clients.values():
            await client.close()
```

#### MCP Server 1: é«˜å¾·åœ°å›¾ (amap-mcp-server)

**åŠŸèƒ½**:
- POIæœç´¢ (æ™¯ç‚¹ã€é…’åº—ç­‰)
- å¤©æ°”æŸ¥è¯¢
- è·¯å¾„è§„åˆ’
- åœ°ç†ç¼–ç 

**å·¥å…·åˆ—è¡¨**:
```python
amap_tools = {
    "search_poi": {
        "description": "æœç´¢åœ°ç‚¹",
        "parameters": {
            "city": "åŸå¸‚åç§°",
            "keywords": "æœç´¢å…³é”®è¯",
            "type": "POIç±»å‹(å¯é€‰)"
        }
    },
    "get_weather": {
        "description": "æŸ¥è¯¢å¤©æ°”",
        "parameters": {
            "city": "åŸå¸‚åç§°",
            "date": "æ—¥æœŸ(å¯é€‰,é»˜è®¤ä»Šå¤©)"
        }
    },
    "geocode": {
        "description": "åœ°å€è½¬åæ ‡",
        "parameters": {
            "address": "åœ°å€"
        }
    },
    "route_planning": {
        "description": "è·¯å¾„è§„åˆ’",
        "parameters": {
            "origin": "èµ·ç‚¹åæ ‡",
            "destination": "ç»ˆç‚¹åæ ‡",
            "mode": "äº¤é€šæ–¹å¼"
        }
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# æœç´¢æ™¯ç‚¹
attractions = await mcp_manager.call_tool(
    "amap-server",
    "search_poi",
    {
        "city": "åŒ—äº¬",
        "keywords": "æ™¯ç‚¹",
        "type": "æ—…æ¸¸æ™¯ç‚¹"
    }
)

# æŸ¥è¯¢å¤©æ°”
weather = await mcp_manager.call_tool(
    "amap-server",
    "get_weather",
    {
        "city": "åŒ—äº¬",
        "date": "2025-12-26"
    }
)
```

#### MCP Server 2: Unsplash API (å›¾ç‰‡æœç´¢)

**åŠŸèƒ½**:
- æœç´¢é«˜è´¨é‡æ™¯ç‚¹å›¾ç‰‡
- è·å–å›¾ç‰‡å…ƒæ•°æ®

**å·¥å…·å®šä¹‰**:
```python
unsplash_tools = {
    "search_photos": {
        "description": "æœç´¢å›¾ç‰‡",
        "parameters": {
            "query": "æœç´¢å…³é”®è¯",
            "per_page": "æ¯é¡µæ•°é‡(é»˜è®¤5)",
            "orientation": "æ–¹å‘(landscape/portrait)"
        }
    }
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# è·å–æ™¯ç‚¹å›¾ç‰‡
images = await mcp_manager.call_tool(
    "unsplash-server",
    "search_photos",
    {
        "query": "æ•…å®« Beijing",
        "per_page": 3,
        "orientation": "landscape"
    }
)
```

#### MCPé…ç½®æ–‡ä»¶

**mcp-config.json**:
```json
{
  "mcpServers": {
    "amap-server": {
      "command": "python",
      "args": ["-m", "amap_mcp_server"],
      "env": {
        "AMAP_API_KEY": "${AMAP_API_KEY}"
      }
    },
    "unsplash-server": {
      "command": "python",
      "args": ["-m", "unsplash_mcp_server"],
      "env": {
        "UNSPLASH_ACCESS_KEY": "${UNSPLASH_ACCESS_KEY}"
      }
    }
  }
}
```

**API Keyé…ç½®** (.env):
```bash
# é«˜å¾·åœ°å›¾API
AMAP_API_KEY=your_amap_key_here

# Unsplash API
UNSPLASH_ACCESS_KEY=your_unsplash_key
UNSPLASH_SECRET_KEY=your_unsplash_secret
```

#### å…±äº«vsç‹¬ç«‹è¿æ¥å¯¹æ¯”

| ç»´åº¦ | ç‹¬ç«‹è¿æ¥ | å…±äº«è¿æ¥ |
|------|---------|---------|
| èµ„æºæ¶ˆè€— | é«˜(Nä¸ªAgent=Nä¸ªè¿æ¥) | ä½(Nä¸ªAgent=1ä¸ªè¿æ¥) |
| APIé¢‘ç‡æ§åˆ¶ | å›°éš¾ | ç®€å•(ç»Ÿä¸€ç®¡ç†) |
| é…ç½®ç®¡ç† | åˆ†æ•£ | é›†ä¸­ |
| è¿æ¥ç¨³å®šæ€§ | å„è‡ªç‹¬ç«‹ | ç»Ÿä¸€ç»´æŠ¤ |
| é”™è¯¯å¤„ç† | åˆ†æ•£å¤„ç† | ç»Ÿä¸€å¤„ç† |

---

### 13.5 å‰ç«¯å¼€å‘

**æŠ€æœ¯æ ˆ**: Vue 3 + TypeScript + Vite

#### é¡¹ç›®ç»“æ„
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/           # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TripForm.vue      # æ—…è¡Œéœ€æ±‚è¡¨å•
â”‚   â”‚   â”œâ”€â”€ LoadingProgress.vue  # åŠ è½½è¿›åº¦
â”‚   â”‚   â”œâ”€â”€ ItineraryDisplay.vue # è¡Œç¨‹å±•ç¤º
â”‚   â”‚   â”œâ”€â”€ MapView.vue       # åœ°å›¾è§†å›¾
â”‚   â”‚   â””â”€â”€ BudgetAnalysis.vue   # é¢„ç®—åˆ†æ
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                  # APIæ¥å£
â”‚   â”‚   â””â”€â”€ trip.ts           # æ—…è¡ŒAPI
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ trip.ts           # æ—…è¡Œç›¸å…³ç±»å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/               # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ trip.ts           # æ—…è¡ŒçŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ App.vue               # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts               # å…¥å£æ–‡ä»¶
â”‚
â””â”€â”€ package.json
```

#### æ ¸å¿ƒç»„ä»¶

**1. TripForm.vue - æ—…è¡Œéœ€æ±‚è¡¨å•**
```vue
<template>
  <div class="trip-form">
    <h2>è§„åˆ’ä½ çš„æ—…è¡Œ</h2>
    
    <!-- ç›®çš„åœ° -->
    <div class="form-group">
      <label>ç›®çš„åœ°:</label>
      <input v-model="form.destination" placeholder="ä¾‹å¦‚:åŒ—äº¬" />
    </div>
    
    <!-- æ—¥æœŸèŒƒå›´ -->
    <div class="form-group">
      <label>æ—…è¡Œæ—¥æœŸ:</label>
      <date-range-picker 
        v-model:start="form.startDate"
        v-model:end="form.endDate"
      />
    </div>
    
    <!-- é¢„ç®— -->
    <div class="form-group">
      <label>é¢„ç®— (å…ƒ):</label>
      <input 
        v-model.number="form.budget"
        type="number"
        min="0"
      />
    </div>
    
    <!-- åå¥½ -->
    <div class="form-group">
      <label>åå¥½:</label>
      <tag-selector v-model="form.preferences" />
    </div>
    
    <!-- æäº¤æŒ‰é’® -->
    <button 
      @click="submitPlan"
      :disabled="isPlanning"
    >
      {{ isPlanning ? 'è§„åˆ’ä¸­...' : 'å¼€å§‹è§„åˆ’' }}
    </button>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useTripStore } from '@/stores/trip'
import type { TravelRequest } from '@/types/trip'

const tripStore = useTripStore()
const form = ref<TravelRequest>({
  destination: '',
  startDate: null,
  endDate: null,
  budget: 5000,
  preferences: [],
  travelers: 1
})

const isPlanning = ref(false)

async function submitPlan() {
  isPlanning.value = true
  try {
    await tripStore.createPlan(form.value)
  } finally {
    isPlanning.value = false
  }
}
</script>
```

**2. LoadingProgress.vue - åŠ è½½è¿›åº¦æ¡**
```vue
<template>
  <div class="loading-progress" v-if="visible">
    <div class="progress-steps">
      <div 
        v-for="step in steps"
        :key="step.name"
        class="step"
        :class="{ active: step.status === 'active', done: step.status === 'done' }"
      >
        <div class="step-icon">
          <i v-if="step.status === 'done'" class="icon-check" />
          <i v-else-if="step.status === 'active'" class="icon-loading" />
          <i v-else class="icon-pending" />
        </div>
        <div class="step-label">{{ step.label }}</div>
      </div>
    </div>
    
    <div class="progress-bar">
      <div 
        class="progress-fill"
        :style="{ width: `${progress}%` }"
      />
    </div>
    
    <div class="progress-message">
      {{ currentMessage }}
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'

const props = defineProps<{
  visible: boolean
  currentStep: string
}>()

const steps = ref([
  { name: 'attractions', label: 'æœç´¢æ™¯ç‚¹', status: 'pending' },
  { name: 'weather', label: 'æŸ¥è¯¢å¤©æ°”', status: 'pending' },
  { name: 'hotel', label: 'æ¨èé…’åº—', status: 'pending' },
  { name: 'itinerary', label: 'ç”Ÿæˆè¡Œç¨‹', status: 'pending' }
])

const progress = computed(() => {
  const doneCount = steps.value.filter(s => s.status === 'done').length
  return (doneCount / steps.value.length) * 100
})

const currentMessage = computed(() => {
  const currentStep = steps.value.find(s => s.status === 'active')
  return currentStep ? `æ­£åœ¨${currentStep.label}...` : 'å‡†å¤‡ä¸­...'
})
</script>
```

**3. MapView.vue - åœ°å›¾è§†å›¾**
```vue
<template>
  <div class="map-view">
    <div id="map-container" ref="mapContainer"></div>
    
    <div class="map-controls">
      <button @click="showAllMarkers">æ˜¾ç¤ºå…¨éƒ¨</button>
      <button @click="showRoute">æ˜¾ç¤ºè·¯çº¿</button>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from 'vue'
import AMapLoader from '@amap/amap-jsapi-loader'

const props = defineProps<{
  attractions: Array<any>
  hotel: any
}>()

const mapContainer = ref<HTMLElement>()
let map: any = null
let markers: any[] = []

onMounted(async () => {
  await initMap()
})

watch(() => props.attractions, () => {
  updateMarkers()
})

async function initMap() {
  const AMap = await AMapLoader.load({
    key: 'your-amap-key',
    version: '2.0',
    plugins: ['AMap.Marker', 'AMap.Polyline']
  })
  
  map = new AMap.Map(mapContainer.value, {
    zoom: 12,
    center: [116.39, 39.9] // é»˜è®¤åŒ—äº¬
  })
}

function updateMarkers() {
  // æ¸…é™¤æ—§æ ‡è®°
  markers.forEach(m => map.remove(m))
  markers = []
  
  // æ·»åŠ æ™¯ç‚¹æ ‡è®°
  props.attractions.forEach((attr, index) => {
    const marker = new AMap.Marker({
      position: [attr.location.lng, attr.location.lat],
      title: attr.name,
      label: {
        content: `${index + 1}`,
        direction: 'top'
      }
    })
    map.add(marker)
    markers.push(marker)
  })
  
  // æ·»åŠ é…’åº—æ ‡è®°
  if (props.hotel) {
    const hotelMarker = new AMap.Marker({
      position: [props.hotel.location.lng, props.hotel.location.lat],
      title: props.hotel.name,
      icon: 'hotel-icon'
    })
    map.add(hotelMarker)
    markers.push(hotelMarker)
  }
  
  // è‡ªåŠ¨è°ƒæ•´è§†é‡
  map.setFitView()
}

function showRoute() {
  // ç»˜åˆ¶è·¯çº¿
  const path = props.attractions.map(a => [
    a.location.lng,
    a.location.lat
  ])
  
  const polyline = new AMap.Polyline({
    path: path,
    strokeColor: '#3366FF',
    strokeWeight: 5
  })
  
  map.add(polyline)
}
</script>
```

---

### 13.6 Webåº”ç”¨æ ¸å¿ƒåŠŸèƒ½

#### 1. é¢„ç®—è®¡ç®—

**å®æ—¶é¢„ç®—åˆ†æå’Œå»ºè®®**

```python
def analyze_budget(total_cost: float, budget: float) -> dict:
    """åˆ†æé¢„ç®—ä½¿ç”¨æƒ…å†µ"""
    ratio = total_cost / budget
    
    if ratio <= 0.8:
        status = "å……è£•"
        suggestion = "é¢„ç®—å……è¶³,å¯ä»¥è€ƒè™‘å‡çº§ä½å®¿æˆ–å¢åŠ ä½“éªŒé¡¹ç›®"
    elif ratio <= 1.0:
        status = "åˆç†"
        suggestion = "é¢„ç®—ä½¿ç”¨åˆç†,å»ºè®®ä¿ç•™ä¸€äº›åº”æ€¥èµ„é‡‘"
    elif ratio <= 1.2:
        status = "è¶…æ”¯"
        suggestion = "ç•¥å¾®è¶…æ”¯,å»ºè®®è°ƒæ•´è¡Œç¨‹æˆ–å‡å°‘éƒ¨åˆ†å¼€é”€"
    else:
        status = "ä¸¥é‡è¶…æ”¯"
        suggestion = "è¶…å‡ºé¢„ç®—è¾ƒå¤š,å»ºè®®é‡æ–°è§„åˆ’è¡Œç¨‹"
    
    breakdown = {
        "ä½å®¿": hotel_cost,
        "äº¤é€š": transportation_cost,
        "é—¨ç¥¨": tickets_cost,
        "é¤é¥®": meals_cost,
        "å…¶ä»–": other_cost
    }
    
    return {
        "status": status,
        "ratio": ratio,
        "suggestion": suggestion,
        "breakdown": breakdown
    }
```

#### 2. è¡Œç¨‹ç¼–è¾‘

**å…è®¸ç”¨æˆ·è‡ªå®šä¹‰è°ƒæ•´è¡Œç¨‹**

```typescript
interface EditableItinerary {
  date: string
  attractions: EditableAttraction[]
  meals: EditableMeal[]
}

// æ‹–æ‹½æ’åº
function reorderAttractions(dayIndex: number, newOrder: number[]) {
  const day = itinerary.value[dayIndex]
  day.attractions = newOrder.map(i => day.attractions[i])
  
  // é‡æ–°è®¡ç®—è·¯çº¿å’Œæ—¶é—´
  recalculateRoute(dayIndex)
}

// åˆ é™¤æ™¯ç‚¹
function removeAttraction(dayIndex: number, attrIndex: number) {
  itinerary.value[dayIndex].attractions.splice(attrIndex, 1)
  recalculateCost()
}

// æ·»åŠ æ™¯ç‚¹
async function addAttraction(dayIndex: number, attraction: Attraction) {
  itinerary.value[dayIndex].attractions.push(attraction)
  
  // è¯¢é—®AIä¼˜åŒ–å»ºè®®
  const suggestion = await askAI(
    `æˆ‘åœ¨ç¬¬${dayIndex+1}å¤©æ·»åŠ äº†${attraction.name},è¯·ç»™å‡ºè¡Œç¨‹ä¼˜åŒ–å»ºè®®`
  )
  
  showSuggestion(suggestion)
}
```

#### 3. å¯¼å‡ºåŠŸèƒ½

**æ”¯æŒå¤šç§æ ¼å¼å¯¼å‡º**

```typescript
// PDFå¯¼å‡º
async function exportToPDF() {
  const pdf = new jsPDF()
  
  // å°é¢
  pdf.text('æ—…è¡Œè®¡åˆ’', 105, 20, { align: 'center' })
  pdf.text(`${trip.destination} ${trip.days}æ—¥æ¸¸`, 105, 30, { align: 'center' })
  
  // æ¯æ—¥è¡Œç¨‹
  trip.itinerary.forEach((day, index) => {
    pdf.addPage()
    pdf.text(`ç¬¬${index+1}å¤© ${day.date}`, 20, 20)
    pdf.text(`å¤©æ°”: ${day.weather.weather}`, 20, 30)
    
    day.attractions.forEach((attr, i) => {
      pdf.text(`${i+1}. ${attr.name}`, 30, 40 + i*10)
    })
  })
  
  pdf.save(`${trip.destination}æ—…è¡Œè®¡åˆ’.pdf`)
}

// Excelå¯¼å‡º
function exportToExcel() {
  const wb = XLSX.utils.book_new()
  
  // è¡Œç¨‹è¡¨
  const wsData = trip.itinerary.flatMap(day => 
    day.attractions.map(attr => ({
      'æ—¥æœŸ': day.date,
      'æ™¯ç‚¹': attr.name,
      'æ—¶é•¿': attr.duration,
      'è´¹ç”¨': attr.cost
    }))
  )
  
  const ws = XLSX.utils.json_to_sheet(wsData)
  XLSX.utils.book_append_sheet(wb, ws, 'è¡Œç¨‹')
  
  // é¢„ç®—è¡¨
  const budgetData = Object.entries(trip.budgetBreakdown).map(
    ([category, amount]) => ({ 'ç±»åˆ«': category, 'é‡‘é¢': amount })
  )
  const budgetWs = XLSX.utils.json_to_sheet(budgetData)
  XLSX.utils.book_append_sheet(wb, budgetWs, 'é¢„ç®—')
  
  XLSX.writeFile(wb, `${trip.destination}æ—…è¡Œè®¡åˆ’.xlsx`)
}

// æ—¥å†å¯¼å‡º (iCalæ ¼å¼)
function exportToCalendar() {
  let ical = 'BEGIN:VCALENDAR\nVERSION:2.0\n'
  
  trip.itinerary.forEach(day => {
    day.attractions.forEach(attr => {
      ical += `BEGIN:VEVENT\n`
      ical += `DTSTART:${formatDate(day.date, attr.startTime)}\n`
      ical += `DTEND:${formatDate(day.date, attr.endTime)}\n`
      ical += `SUMMARY:${attr.name}\n`
      ical += `LOCATION:${attr.location.address}\n`
      ical += `DESCRIPTION:${attr.description}\n`
      ical += `END:VEVENT\n`
    })
  })
  
  ical += 'END:VCALENDAR'
  
  downloadFile(ical, `${trip.destination}.ics`)
}
```

#### 4. ä¾§è¾¹å¯¼èˆª

**å¿«é€Ÿè·³è½¬åˆ°æŒ‡å®šæ—¥æœŸ**

```vue
<template>
  <div class="side-navigation">
    <div class="nav-header">è¡Œç¨‹å¯¼èˆª</div>
    
    <div 
      v-for="(day, index) in itinerary"
      :key="index"
      class="nav-item"
      :class="{ active: currentDay === index }"
      @click="scrollToDay(index)"
    >
      <div class="day-label">ç¬¬{{index+1}}å¤©</div>
      <div class="day-date">{{ day.date }}</div>
      <div class="day-preview">
        {{ day.attractions.length }} ä¸ªæ™¯ç‚¹
      </div>
    </div>
    
    <div class="nav-footer">
      <button @click="scrollToTop">è¿”å›é¡¶éƒ¨</button>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue'

const currentDay = ref(0)

// ç›‘å¬æ»šåŠ¨,æ›´æ–°å½“å‰æ—¥æœŸ
function handleScroll() {
  const scrollPos = window.scrollY
  const dayElements = document.querySelectorAll('.day-section')
  
  dayElements.forEach((el, index) => {
    const rect = el.getBoundingClientRect()
    if (rect.top <= 100 && rect.bottom >= 100) {
      currentDay.value = index
    }
  })
}

// æ»šåŠ¨åˆ°æŒ‡å®šæ—¥æœŸ
function scrollToDay(index: number) {
  const el = document.querySelector(`.day-section-${index}`)
  el?.scrollIntoView({ behavior: 'smooth' })
}

onMounted(() => {
  window.addEventListener('scroll', handleScroll)
})

onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll)
})
</script>
```

---

## ğŸ’¡ æ ¸å¿ƒè®¾è®¡æ€æƒ³

### 1. å…³æ³¨ç‚¹åˆ†ç¦»

**æ¯ä¸ªAgentä¸“æ³¨è‡ªå·±çš„èŒè´£**:
- AttractionAgent â†’ åªè´Ÿè´£æ™¯ç‚¹
- WeatherAgent â†’ åªè´Ÿè´£å¤©æ°”
- HotelAgent â†’ åªè´Ÿè´£é…’åº—
- ItineraryAgent â†’ è´Ÿè´£æ•´åˆ

**ä¼˜ç‚¹**:
- ä»£ç æ¸…æ™°
- æ˜“äºæµ‹è¯•
- ä¾¿äºæ‰©å±•

### 2. æ•°æ®é©±åŠ¨

**Pydanticæ¨¡å‹ç¡®ä¿æ•°æ®ä¸€è‡´æ€§**:
- ç±»å‹å®‰å…¨
- è‡ªåŠ¨éªŒè¯
- å‰åç«¯ç»Ÿä¸€

### 3. å¼‚æ­¥å¹¶å‘

**æå‡æ€§èƒ½çš„å…³é”®**:
```python
# âŒ ä¸²è¡Œæ‰§è¡Œ - æ…¢
attractions = await search_attractions()  # 3ç§’
weather = await get_weather()             # 2ç§’
# æ€»è®¡: 5ç§’

# âœ… å¹¶è¡Œæ‰§è¡Œ - å¿«
attractions, weather = await asyncio.gather(
    search_attractions(),  # 3ç§’
    get_weather()          # 2ç§’
)
# æ€»è®¡: 3ç§’ (æœ€é•¿ä»»åŠ¡çš„æ—¶é—´)
```

### 4. MCPå·¥å…·å…±äº«

**èŠ‚çœèµ„æºçš„æ™ºæ…§**:
- ä¸€ä¸ªè¿æ¥,å¤šä¸ªAgentä½¿ç”¨
- ç»Ÿä¸€ç®¡ç†APIè°ƒç”¨é¢‘ç‡
- ç®€åŒ–é…ç½®

---

## ğŸ¯ å­¦ä¹ é‡ç‚¹

### å¿…é¡»ç†è§£
1. âœ… å¤šAgentåä½œæ¨¡å¼
2. âœ… æ•°æ®æ¨¡å‹è®¾è®¡(Pydantic)
3. âœ… MCP Serverå…±äº«æœºåˆ¶
4. âœ… å‰åç«¯åˆ†ç¦»æ¶æ„

### éœ€è¦æŒæ¡
1. âœ… Agentä¹‹é—´çš„ä¾èµ–å…³ç³»
2. âœ… å¼‚æ­¥ç¼–ç¨‹(asyncio)
3. âœ… APIé›†æˆ(é«˜å¾·ã€Unsplash)
4. âœ… å‰ç«¯ç»„ä»¶å¼€å‘(Vue3)

### å¯ä»¥æ‰©å±•
1. âš ï¸ æ€§èƒ½ä¼˜åŒ–(ç¼“å­˜ã€å¹¶å‘æ§åˆ¶)
2. âš ï¸ é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
3. âš ï¸ ç”¨æˆ·ä¸ªæ€§åŒ–(è®°å¿†åå¥½)
4. âš ï¸ æ›´å¤šåŠŸèƒ½(é¤å…æ¨èã€è´­ç‰©ç­‰)

---

## ğŸ“Š é¡¹ç›®ç»“æ„æ€»è§ˆ

```
helloagents-trip-planner/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ agents/            # Agentå®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ attraction.py
â”‚   â”‚   â”‚   â”œâ”€â”€ weather.py
â”‚   â”‚   â”‚   â”œâ”€â”€ hotel.py
â”‚   â”‚   â”‚   â””â”€â”€ itinerary.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ mcp/               # MCPç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py
â”‚   â”‚   â”‚   â””â”€â”€ config.json
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ trip.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ main.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ core/              # æ ¸å¿ƒé…ç½®
â”‚   â”‚       â””â”€â”€ config.py
â”‚   â”‚
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ .env
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ stores/
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â””â”€â”€ README.md
```

---

## ğŸš€ ä¸‹ä¸€æ­¥

### ç«‹å³è¡ŒåŠ¨
1. [ ] é…ç½®å¼€å‘ç¯å¢ƒ
2. [ ] ç”³è¯·API Key (é«˜å¾·ã€Unsplash)
3. [ ] è¿è¡Œç¤ºä¾‹é¡¹ç›®
4. [ ] ç†è§£æ ¸å¿ƒä»£ç 

### æ·±å…¥å­¦ä¹ 
1. [ ] åˆ†ææ¯ä¸ªAgentçš„å®ç°
2. [ ] ç†è§£MCPå…±äº«æœºåˆ¶
3. [ ] å­¦ä¹ å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼
4. [ ] ç ”ç©¶å‰ç«¯äº¤äº’è®¾è®¡

### å®è·µæ‰©å±•
1. [ ] æ·»åŠ æ–°çš„Agent (å¦‚é¤å…æ¨è)
2. [ ] ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
3. [ ] å®ç°ç¼“å­˜æœºåˆ¶
4. [ ] æ·»åŠ æµ‹è¯•ç”¨ä¾‹

---

**å­¦ä¹ çŠ¶æ€**: âœ… ç†è®ºå­¦ä¹ å®Œæˆ  
**ä¸‹ä¸€æ­¥**: è¿è¡Œé¡¹ç›®,ç†è§£ä»£ç   
**é¢„è®¡æ—¶é—´**: 2å¤©

---

**åˆ›å»ºæ—¶é—´**: 2025-12-25  
**æœ€åæ›´æ–°**: 2025-12-25
