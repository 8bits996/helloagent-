# Task05 ä¹ é¢˜è§£ç­” - MCPåè®®è®²è§£

**å®Œæˆæ—¥æœŸ**: å¾…å®Œæˆ  
**å­¦ä¹ è€…**: frankechen

---

## ä¹ é¢˜1: MCP åè®®ç†è§£

### é¢˜ç›®
å¯¹æ¯” MCP ä¸ REST API çš„åŒºåˆ«,åˆ†æå„è‡ªçš„é€‚ç”¨åœºæ™¯ã€‚

### è§£ç­”

#### 1. æ ¸å¿ƒåŒºåˆ«

| ç»´åº¦ | MCP | REST API |
|------|-----|----------|
| åè®®åŸºç¡€ |  |  |
| æ•°æ®æ ¼å¼ |  |  |
| é€šä¿¡æ–¹å¼ |  |  |
| çŠ¶æ€ç®¡ç† |  |  |
| å·¥å…·å‘ç° |  |  |

#### 2. é€‚ç”¨åœºæ™¯

**MCP é€‚ç”¨åœºæ™¯**:
- 
- 
- 

**REST API é€‚ç”¨åœºæ™¯**:
- 
- 
- 

#### 3. é€‰æ‹©å»ºè®®

**é€‰æ‹© MCP çš„æƒ…å†µ**:
- 

**é€‰æ‹© REST çš„æƒ…å†µ**:
- 

---

## ä¹ é¢˜2: Server å¼€å‘

### é¢˜ç›®
è®¾è®¡å¹¶å®ç°ä¸€ä¸ªå®ç”¨çš„ MCP Server,è¦æ±‚:
1. è‡³å°‘åŒ…å« 3 ä¸ªå·¥å…·
2. å®ç° Resources åŠŸèƒ½
3. æ·»åŠ å®Œå–„çš„é”™è¯¯å¤„ç†
4. ç¼–å†™æµ‹è¯•ç”¨ä¾‹

### è§£ç­”

#### 1. Server è®¾è®¡

**Server åç§°**: 

**åŠŸèƒ½é¢†åŸŸ**: 

**å·¥å…·åˆ—è¡¨**:
1. **å·¥å…·1**: 
   - æè¿°: 
   - å‚æ•°: 
   - è¿”å›: 

2. **å·¥å…·2**: 
   - æè¿°: 
   - å‚æ•°: 
   - è¿”å›: 

3. **å·¥å…·3**: 
   - æè¿°: 
   - å‚æ•°: 
   - è¿”å›: 

#### 2. ä»£ç å®ç°

**æ–‡ä»¶**: `ä»£ç å®è·µ/[server_name].py`

```python
# ä¸»è¦ä»£ç ç‰‡æ®µ
```

#### 3. æµ‹è¯•ç”¨ä¾‹

**æµ‹è¯•æ–‡ä»¶**: `ä»£ç å®è·µ/tests/test_[server_name].py`

```python
# æµ‹è¯•ä»£ç 
```

#### 4. è¿è¡Œç»“æœ

**æµ‹è¯•é€šè¿‡æƒ…å†µ**:
- 

**ç¤ºä¾‹è¾“å‡º**:
```
[ç²˜è´´è¾“å‡º]
```

#### 5. è®¾è®¡è¯´æ˜

**è®¾è®¡æ€è·¯**:
- 

**æŠ€æœ¯é€‰æ‹©**:
- 

**ä¼˜åŒ–ç‚¹**:
- 

---

## ä¹ é¢˜3: Agent é›†æˆ âœ…

### é¢˜ç›®
å°†å¤šä¸ª MCP Server é›†æˆåˆ° Agent ä¸­,å®ç°å·¥å…·åä½œåœºæ™¯ã€‚è¦æ±‚:
1. è‡³å°‘é›†æˆ 2 ä¸ª MCP Server
2. è®¾è®¡ä¸€ä¸ªéœ€è¦å¤šå·¥å…·åä½œçš„ä»»åŠ¡
3. å®ç°å·¥å…·å‘ç°å’Œè·¯ç”±
4. æµ‹è¯•å®Œæ•´æµç¨‹

### è§£ç­”

#### 1. åœºæ™¯è®¾è®¡

**ä»»åŠ¡æè¿°**: æ™ºèƒ½æ–‡ä»¶åˆ†æåŠ©æ‰‹

è¯¥åŠ©æ‰‹å¯ä»¥åˆ†æé¡¹ç›®æ–‡ä»¶,å®Œæˆä»¥ä¸‹ä»»åŠ¡:
- è¯»å–å’Œåˆ—å‡ºé¡¹ç›®æ–‡ä»¶
- åˆ†æä»£ç å†…å®¹å’Œç»Ÿè®¡ä¿¡æ¯
- ç”Ÿæˆé¡¹ç›®åˆ†ææŠ¥å‘Š
- åè°ƒå¤šä¸ªå·¥å…·å®Œæˆå¤æ‚å·¥ä½œæµ

**éœ€è¦çš„å·¥å…·**:
1. **æ–‡ä»¶è¯»å†™å·¥å…·** (file-server)
   - read_file: è¯»å–æ–‡ä»¶å†…å®¹
   - write_file: å†™å…¥æ–‡ä»¶
   - list_directory: åˆ—å‡ºç›®å½•
   - search_files: æœç´¢æ–‡ä»¶
   - file_info: è·å–æ–‡ä»¶ä¿¡æ¯

2. **æ•°æ®åˆ†æå·¥å…·** (data-server)
   - analyze_text: æ–‡æœ¬åˆ†æ
   - calculate_stats: ç»Ÿè®¡è®¡ç®—
   - parse_json: JSON è§£æ
   - extract_patterns: æ¨¡å¼æå–
   - compare_texts: æ–‡æœ¬å¯¹æ¯”

3. **åä½œæ–¹å¼**
   - é€šè¿‡é¡ºåºè°ƒç”¨ä¸åŒ Server çš„å·¥å…·
   - å°†ä¸€ä¸ª Server çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ª Server çš„è¾“å…¥
   - ç»„åˆå¤šä¸ªå·¥å…·å®Œæˆå¤æ‚ä»»åŠ¡

**åä½œæµç¨‹**:
```
1. æ–‡ä»¶åˆ›å»º (file-server: write_file)
   â†“
2. æ–‡ä»¶è¯»å– (file-server: read_file)
   â†“
3. å†…å®¹åˆ†æ (data-server: analyze_text)
   â†“
4. æ¨¡å¼æå– (data-server: extract_patterns)
   â†“
5. æŠ¥å‘Šç”Ÿæˆ (file-server: write_file)
```

#### 2. é›†æˆçš„ MCP Servers

**Server 1: file-server** (æ–‡ä»¶æ“ä½œæœåŠ¡å™¨)
- åŠŸèƒ½: æ–‡ä»¶å’Œç›®å½•æ“ä½œ
- å·¥å…·:
  - read_file: è¯»å–æ–‡ä»¶
  - write_file: å†™å…¥æ–‡ä»¶
  - list_directory: åˆ—å‡ºç›®å½•
  - search_files: æœç´¢æ–‡ä»¶
  - file_info: æ–‡ä»¶ä¿¡æ¯
- ç‰¹ç‚¹: ä¸“æ³¨æ–‡ä»¶ç³»ç»Ÿäº¤äº’

**Server 2: data-server** (æ•°æ®åˆ†ææœåŠ¡å™¨)
- åŠŸèƒ½: æ•°æ®å¤„ç†å’Œåˆ†æ
- å·¥å…·:
  - analyze_text: æ–‡æœ¬åˆ†æ
  - calculate_stats: ç»Ÿè®¡è®¡ç®—
  - parse_json: JSON å¤„ç†
  - extract_patterns: æ¨¡å¼åŒ¹é…
  - compare_texts: æ–‡æœ¬æ¯”è¾ƒ
  - summarize_data: æ•°æ®æ‘˜è¦
- ç‰¹ç‚¹: ä¸“æ³¨æ•°æ®åˆ†æ

#### 3. ä»£ç å®ç°

**æ–‡ä»¶**: 
- `ä»£ç å®è·µ/mcp_server_file.py` - æ–‡ä»¶æ“ä½œ Server
- `ä»£ç å®è·µ/mcp_server_data.py` - æ•°æ®åˆ†æ Server
- `ä»£ç å®è·µ/simple_multi_server_demo.py` - å¤š Server åä½œæ¼”ç¤º
- `ä»£ç å®è·µ/mcp_multi_server_manager.py` - å¤š Server ç®¡ç†å™¨

**æ ¸å¿ƒå®ç°**:

```python
# åœºæ™¯1: æ–‡ä»¶åˆ†ææµç¨‹
async def demo_two_servers():
    # 1. è¿æ¥æ–‡ä»¶ Server
    async with stdio_client(file_server_params) as (file_read, file_write):
        async with ClientSession(file_read, file_write) as file_session:
            await file_session.initialize()
            
            # è¯»å–æ–‡ä»¶
            result = await file_session.call_tool(
                "read_file",
                {"file_path": "test_analysis.txt"}
            )
            file_content = result.content[0].text
    
    # 2. è¿æ¥æ•°æ®åˆ†æ Server
    async with stdio_client(data_server_params) as (data_read, data_write):
        async with ClientSession(data_read, data_write) as data_session:
            await data_session.initialize()
            
            # åˆ†æå†…å®¹
            result = await data_session.call_tool(
                "analyze_text",
                {"text": file_content}
            )
            analysis = result.content[0].text
            
            # æå–æ¨¡å¼
            result = await data_session.call_tool(
                "extract_patterns",
                {"text": file_content, "pattern_type": "number"}
            )
```

#### 4. æµ‹è¯•ç»“æœ

**æµ‹è¯•åœºæ™¯**: æ–‡ä»¶åˆ†æ + æ—¥å¿—å¤„ç† + æ•°æ®ç»Ÿè®¡

**æ‰§è¡Œæµç¨‹**:

**åœºæ™¯1: æ–‡ä»¶åˆ†ææµç¨‹**
1. âœ… åˆ›å»ºæµ‹è¯•æ–‡ä»¶ (file-server)
2. âœ… è¯»å–æ–‡ä»¶å†…å®¹ (file-server)
3. âœ… åˆ†ææ–‡æœ¬ç»Ÿè®¡ (data-server)
4. âœ… æå–æ•°å­—æ¨¡å¼ (data-server)

**åœºæ™¯2: æ—¥å¿—å¤„ç†æµç¨‹**
1. âœ… åˆ›å»ºæ—¥å¿—æ–‡ä»¶ (file-server)
2. âœ… è¯»å–æ—¥å¿— (file-server)
3. âœ… åˆ†ææ—¥å¿—å†…å®¹ (data-server)
4. âœ… ç”ŸæˆæŠ¥å‘Š (file-server)

**åœºæ™¯3: æ•°æ®å¤„ç†æµç¨‹**
1. âœ… ä¿å­˜æ•°æ®åˆ°æ–‡ä»¶ (file-server)
2. âœ… ç»Ÿè®¡åˆ†æ (data-server)
3. âœ… ç”ŸæˆæŠ¥å‘Š (file-server)

**æœ€ç»ˆç»“æœ**:
```
ğŸ‰ æ‰€æœ‰æ¼”ç¤ºå®Œæˆ!
================================================================================

ğŸ“ æ ¸å¿ƒå­¦ä¹ ç‚¹:
  1. å¤šä¸ª MCP Server å¯ä»¥ååŒå·¥ä½œ
  2. æ¯ä¸ª Server ä¸“æ³¨è‡ªå·±çš„èŒè´£
  3. å·¥å…·ç»„åˆå¸¦æ¥æ›´å¼ºå¤§çš„èƒ½åŠ›
  4. é€šè¿‡ç¼–æ’å·¥å…·å¯ä»¥å®Œæˆå¤æ‚ä»»åŠ¡

æ¼”ç¤ºç»Ÿè®¡:
- è¿æ¥ Server: 2 ä¸ª
- æµ‹è¯•åœºæ™¯: 3 ä¸ª
- å·¥å…·è°ƒç”¨: 15+ æ¬¡
- æˆåŠŸç‡: 100%
```

#### 5. æŠ€æœ¯äº®ç‚¹

**å·¥å…·è·¯ç”±ç­–ç•¥**:
- é€šè¿‡ Server åç§°æ ‡è¯†ä¸åŒçš„æœåŠ¡
- æ ¹æ®å·¥å…·ç±»å‹è‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„ Server
- æ”¯æŒé¡ºåºè°ƒç”¨å’Œå¹¶è¡Œè°ƒç”¨

**æ¶æ„è®¾è®¡**:
- **èŒè´£åˆ†ç¦»**: æ–‡ä»¶æ“ä½œå’Œæ•°æ®åˆ†æå®Œå…¨åˆ†ç¦»
- **ç‹¬ç«‹éƒ¨ç½²**: æ¯ä¸ª Server ç‹¬ç«‹è¿è¡Œ
- **æ ‡å‡†æ¥å£**: ç»Ÿä¸€çš„ MCP åè®®
- **å¯æ‰©å±•æ€§**: å¯ä»¥è½»æ¾æ·»åŠ æ›´å¤š Server

**å·¥ä½œæµç¼–æ’**:
- é¡ºåºè°ƒç”¨: å‰ä¸€ä¸ªå·¥å…·çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ªçš„è¾“å…¥
- æ•°æ®ä¼ é€’: åœ¨ä¸åŒ Server ä¹‹é—´ä¼ é€’æ•°æ®
- é”™è¯¯å¤„ç†: æ¯ä¸ªæ­¥éª¤éƒ½æœ‰é”™è¯¯å¤„ç†

**æ€§èƒ½ä¼˜åŒ–**:
- å¼‚æ­¥è¿æ¥: ä½¿ç”¨ async/await æé«˜æ•ˆç‡
- èµ„æºç®¡ç†: æ­£ç¡®ç®¡ç† Server è¿æ¥ç”Ÿå‘½å‘¨æœŸ
- æŒ‰éœ€è¿æ¥: åªåœ¨éœ€è¦æ—¶è¿æ¥ Server

**é”™è¯¯å¤„ç†**:
- è¿æ¥å¤±è´¥å¤„ç†
- å·¥å…·è°ƒç”¨å¼‚å¸¸æ•è·
- èµ„æºæ¸…ç†ä¿è¯ 

---

## ä¹ é¢˜4: å¼€æºè´¡çŒ®

### é¢˜ç›®
æ”¹è¿›ç°æœ‰çš„ MCP Server æˆ–å¼€å‘æ–°çš„ Server,ä¸ºå¼€æºç¤¾åŒºè´¡çŒ®ã€‚

### è§£ç­”

#### 1. é¡¹ç›®é€‰æ‹©

**é€‰æ‹©**: 
- [ ] æ”¹è¿›ç°æœ‰ Server
- [ ] å¼€å‘æ–° Server

**é¡¹ç›®åç§°**: 

**GitHub é“¾æ¥**: 

#### 2. è´¡çŒ®å†…å®¹

**æ”¹è¿›ç‚¹/æ–°åŠŸèƒ½**:
1. 
2. 
3. 

#### 3. ä»£ç å®ç°

**ä¸»è¦ä»£ç **:
```python
# ä»£ç ç‰‡æ®µ
```

#### 4. æµ‹è¯•éªŒè¯

**æµ‹è¯•åœºæ™¯**:
- 

**æµ‹è¯•ç»“æœ**:
- 

#### 5. æ–‡æ¡£ç¼–å†™

**README æ›´æ–°**:
- 

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# ç¤ºä¾‹ä»£ç 
```

---

## é™„åŠ ç»ƒä¹ 

### ç»ƒä¹ 1: é”™è¯¯å¤„ç†è®¾è®¡

**é¢˜ç›®**: è®¾è®¡ä¸€ä¸ªå®Œå–„çš„é”™è¯¯å¤„ç†ç³»ç»Ÿ

**è§£ç­”**:

```python
# é”™è¯¯å¤„ç†ä»£ç 
```

---

### ç»ƒä¹ 2: æ€§èƒ½ä¼˜åŒ–

**é¢˜ç›®**: ä¼˜åŒ– MCP Server çš„æ€§èƒ½

**è§£ç­”**:

**ä¼˜åŒ–æ–¹æ¡ˆ**:
1. 
2. 
3. 

**ä»£ç å®ç°**:
```python
# ä¼˜åŒ–ä»£ç 
```

**æ€§èƒ½å¯¹æ¯”**:
- 

---

### ç»ƒä¹ 3: å®‰å…¨æ€§å¢å¼º

**é¢˜ç›®**: ä¸º MCP Server æ·»åŠ å®‰å…¨æœºåˆ¶

**è§£ç­”**:

**å®‰å…¨æªæ–½**:
1. 
2. 
3. 

**ä»£ç å®ç°**:
```python
# å®‰å…¨ä»£ç 
```

---

## å­¦ä¹ æ€»ç»“

### ä¹ é¢˜å®Œæˆæƒ…å†µ

- [ ] ä¹ é¢˜1: MCP åè®®ç†è§£
- [ ] ä¹ é¢˜2: Server å¼€å‘
- [ ] ä¹ é¢˜3: Agent é›†æˆ
- [ ] ä¹ é¢˜4: å¼€æºè´¡çŒ®

### ä¸»è¦æ”¶è·

1. 
2. 
3. 

### é‡åˆ°çš„å›°éš¾

1. 
2. 
3. 

### è§£å†³æ–¹æ¡ˆ

1. 
2. 
3. 

---

**å®Œæˆåº¦**: 0%  
**æœ€åæ›´æ–°**: 2024-12-24
