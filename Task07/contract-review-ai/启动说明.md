# 🚀 系统启动说明

## 📋 前置要求

确保以下服务已安装：
- �?Python 3.10+
- �?CodeBuddy CLI
- �?所有依赖已安装 (`pip install -r requirements.txt`)

---

## 🎯 完整启动流程

### 步骤1: 启动CodeBuddy Headless

**打开终端1**，运行：

```bash
codebuddy --serve --port 3000
```

等待输出�?```
Service endpoint: http://127.0.0.1:3000
```

---

### 步骤2: 启动FastAPI后端

**打开终端2**，运行：

```bash
cd /path/to/contract-review-ai
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

等待输出�?```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete.
```

---

### 步骤3: 启动Streamlit前端

**打开终端3**，运行：

```bash
cd /path/to/contract-review-ai
streamlit run app/frontend.py
```

等待输出并自动打开浏览器：
```
You can now view your Streamlit app in your browser.

Local URL: http://localhost:8501
Network URL: http://192.168.x.x:8501
```

---

## 🌐 访问地址

| 服务 | 地址 | 说明 |
|------|------|------|
| **Streamlit前端** | http://localhost:8501 | 主界�?|
| **FastAPI后端** | http://localhost:8000 | API服务 |
| **API文档** | http://localhost:8000/docs | Swagger UI |
| **CodeBuddy API** | http://localhost:3000 | Agent服务 |

---

## �?验证系统状�?
### 方法1: 通过Streamlit界面

1. 打开 http://localhost:8501
2. 查看左侧边栏"系统状�?
3. 应该显示�?   - �?API服务正常
   - �?FastAPI
   - �?CodeBuddy (如果已启�?
   - �?MarkItDown

### 方法2: 通过API健康检�?
```bash
curl http://localhost:8000/health
```

应该返回�?```json
{
  "status": "healthy",
  "services": {
    "fastapi": "ok",
    "codebuddy": "ok",
    "markitdown": "ok"
  }
}
```

---

## 🎮 快速测�?
### 测试文件上传和解�?
1. 打开 Streamlit界面
2. 点击"上传合同文件"
3. 选择一个测试文件（PDF、Word等）
4. 点击"🚀 开始评�?
5. 观察文件解析进度
6. 解析完成后点�?▶️ 开始AI评审"
7. 切换�?📊 任务列表"查看进度

---

## 🐛 常见问题

### 问题1: CodeBuddy连接失败

**症状**: Streamlit显示"⚠️ CodeBuddy未启�?

**解决**:
```bash
# 确认CodeBuddy已启�?codebuddy --serve --port 3000
```

---

### 问题2: FastAPI启动失败

**症状**: 端口8000被占�?
**解决**:
```bash
# 查看占用端口的进�?netstat -ano | findstr :8000

# 或者使用其他端�?uvicorn app.main:app --port 8001
```

---

### 问题3: Streamlit无法访问

**症状**: 浏览器无法打开

**解决**:
```bash
# 检查防火墙
# 或手动访�?http://localhost:8501
```

---

## 📝 日志查看

### FastAPI日志
- 位置: `logs/app.log`
- 实时查看: 终端2

### Streamlit日志
- 实时查看: 终端3

### CodeBuddy日志
- 实时查看: 终端1

---

## 🔄 重启服务

### 重启FastAPI
```bash
# Ctrl+C 停止
# 重新运行
uvicorn app.main:app --reload
```

### 重启Streamlit
```bash
# Ctrl+C 停止
# 重新运行
streamlit run app/frontend.py
```

### 重启CodeBuddy
```bash
# Ctrl+C 停止
# 重新运行
codebuddy --serve --port 3000
```

---

## 🎯 下一�?
系统启动成功后，您可以：

1. �?上传测试文件进行评审
2. �?查看API文档: http://localhost:8000/docs
3. �?阅读使用文档: `QUICKSTART.md`
4. �?查看开发报�? `�?周完整开发报�?md`

---

## 💡 使用建议

### 开发模�?
推荐使用3个终端分别运行服务，便于�?- 查看实时日志
- 快速重启服�?- 调试错误

### 生产模式（未来）

将使用Docker Compose一键启动所有服务�?
---

## 📞 获取帮助

遇到问题�?
1. 查看日志: `logs/app.log`
2. 运行测试: `python test_markitdown.py`
3. 查看文档: `QUICKSTART.md`
4. 检查服�? http://localhost:8000/health

---

**祝使用愉快！** 🎉
