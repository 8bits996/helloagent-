# DeepResearch Agent 服务管理说明

本目录包含用于管理 DeepResearch Agent 服务的批处理脚本。

---

## 📁 脚本文件

### 1. 启动所有服务.bat
**功能**: 一键启动前后端服务

**使用方法**:
- 双击运行 `启动所有服务.bat`
- 或在命令行中执行: `启动所有服务.bat`

**执行流程**:
1. 检查 Python 和 Node.js 环境
2. 在新窗口中启动后端服务 (端口 8000)
3. 在新窗口中启动前端服务 (端口 5174)
4. 自动打开浏览器访问前端页面

**服务地址**:
- 前端: http://localhost:5174
- 后端: http://localhost:8000
- API文档: http://localhost:8000/docs

---

### 2. 停止所有服务.bat
**功能**: 停止所有运行中的服务

**使用方法**:
- 双击运行 `停止所有服务.bat`
- 或在命令行中执行: `停止所有服务.bat`

**执行流程**:
1. 查找并停止后端 Python 进程
2. 查找并停止前端 Node 进程
3. 确认所有服务已停止

---

### 3. 重启所有服务.bat
**功能**: 重启前后端服务

**使用方法**:
- 双击运行 `重启所有服务.bat`
- 或在命令行中执行: `重启所有服务.bat`

**执行流程**:
1. 调用 `停止所有服务.bat` 停止现有服务
2. 等待 3 秒确保服务完全停止
3. 调用 `启动所有服务.bat` 重新启动服务

---

## 🎯 使用场景

### 场景 1: 首次启动
```
双击运行: 启动所有服务.bat
```

### 场景 2: 修改了代码或配置
```
双击运行: 重启所有服务.bat
```

### 场景 3: 需要停止服务
```
双击运行: 停止所有服务.bat
```
或者直接关闭启动服务时打开的命令窗口。

### 场景 4: 服务出现异常
```
1. 双击运行: 停止所有服务.bat
2. 等待几秒
3. 双击运行: 启动所有服务.bat
```

---

## 🔧 手动启动（高级用户）

如果需要手动控制服务，可以分别启动：

### 启动后端
```cmd
cd backend
python src\main.py
```

### 启动前端
```cmd
cd frontend
npm run dev
```

---

## ⚠️ 常见问题

### Q1: 启动失败提示 "未找到 Python"
**解决**: 
1. 确保已安装 Python 3.10+
2. 将 Python 添加到系统 PATH 环境变量
3. 在命令行中运行 `python --version` 验证

### Q2: 启动失败提示 "未找到 Node.js"
**解决**: 
1. 确保已安装 Node.js 16+
2. 将 Node.js 添加到系统 PATH 环境变量
3. 在命令行中运行 `node --version` 验证

### Q3: 端口被占用
**解决**: 
1. 运行 `停止所有服务.bat` 停止现有服务
2. 检查是否有其他程序占用 8000 或 5174 端口
3. 使用 `netstat -ano | findstr "8000"` 查看端口占用

### Q4: 前端无法连接后端
**解决**: 
1. 确认后端服务已正常启动
2. 访问 http://localhost:8000/healthz 检查后端状态
3. 检查 `backend/.env` 配置是否正确
4. 查看后端命令窗口的错误日志

### Q5: 研究请求失败
**解决**: 
1. 检查 `backend/.env` 中的 LLM_API_KEY 是否有效
2. 确认网络连接正常
3. 查看后端日志中的详细错误信息
4. 尝试使用简单的研究主题测试（如 "Python"）

---

## 📝 配置文件位置

- **后端配置**: `backend/.env`
- **前端配置**: `frontend/.env.local`

修改配置后需要重启服务才能生效。

---

## 🚀 快速启动流程

```
第一次使用:
1. 确保已安装 Python 和 Node.js
2. 双击 "启动所有服务.bat"
3. 等待浏览器自动打开
4. 开始使用！

日常使用:
1. 双击 "启动所有服务.bat" 启动
2. 使用完毕后关闭命令窗口或运行 "停止所有服务.bat"

遇到问题:
1. 双击 "重启所有服务.bat"
2. 如果问题依然存在，查看命令窗口中的错误日志
```

---

## 💡 提示

1. **保持窗口打开**: 启动服务后，不要关闭打开的命令窗口，否则服务会停止
2. **查看日志**: 命令窗口中会显示实时日志，方便调试
3. **环境变量**: 首次使用前确认 `.env` 文件配置正确
4. **网络要求**: 使用 LLM API 和搜索功能需要联网

---

**最后更新**: 2025-12-26  
**创建者**: CodeBuddy Code
